from moviepy.editor import ImageSequenceClip
import os
import requests
import unicodedata
import shutil
from PIL import Image
from groq import Groq

#Api key
GROQ_API_KEY = os.getenv('API_Qroq')

# Cliente de Groq
client = Groq(api_key=GROQ_API_KEY)

imgLenguaje = r"C:\Users\josue\OneDrive - Universidad Tecnologica del Peru\Desktop\Includify2.0\flaskAPI\imgLenguaje"
video_path = os.path.join(r"C:\Users\josue\OneDrive - Universidad Tecnologica del Peru\Desktop\Includify2.0\flaskAPI", "Se√±as.mp4")

os.makedirs(imgLenguaje, exist_ok=True)

list_words = ['abajo', 'babosa', 'caballero', 'da√±ado', 'ebullici√≥n', 'Facatativa', 'gabinete', 'habichuela', 'Ibague', 'jabalina', 'kilogramo', 'm', 'nacer', 'obedecer', 'paciencia', 'q', 'rabia', 's√°bado', 'Ubate', 'vaca', 'web', 'xilema', 'ya', 'zanahoria', 'abandonar', 'bafle', 'caballo', 'danza', 'eclipse', 'facebook', 'Gachet√°', 'habitad', 'ICAP', 'jab√≥n', 'kilolitro', 'Mac', 'nacimiento', 'padre', 'qu√©', 'racionalizada', 'sabana', 'tablero', '√∫ltimo', 'vacaciones', 'Whatsapp', 'Yacuanquer', 'zancudo', 'abanico', 'bailar', 'cabello', 'dar', 'Ecopetrol', 'f√°cil', 'gafas', 'ICBF', 'jaguar', 'kil√≥metro', 'machismo', 'nacionalismo', 'objetivo', 'radiaci√≥n', 'taca√±o', 'un', 'vacuna', 'wifi', 'yarda', 'Zipaquir√°', 'abarcar', 'bailarina', 'cabeza', 'ecosistema', 'Gal√°n', 'hablar', 'ICFES', 'jam√°s', 'macho', 'nacionalista', 'padres', 'radicaci√≥n', 'saber', 'tacones', 'vagina', 'abofetear', 'bajar', 'cabra', 'de', 'ecuaciones', 'factores', 'G√°lapa', 'idea', 'Jamund√≠', 'madre', 'nada', 'padrino', 'radical', 'sabidur√≠a', 'tacto', 'vaiv√©n', 'abonar', 'Cabrera', 'G√°latas', 'identidad', 'jard√≠n', 'Madrid', 'nadan', 'pagar', 'quedar', 'radio', 'sabroso', 'valioso', 'abono', 'bajo', 'cachucha', 'factorizaci√≥n', 'galleta', 'idioma', 'jardinero', 'madrina', 'nadar', 'obligaci√≥n', 'Paila', 'quemadura', 'radiograf√≠a', 'sacerdote', 'Taironas', 'u√±a', 'valle', 'aborto', 'balanceo', 'Fal√°n', 'gallina', 'iglesia', 'jaula', 'madrugada', 'naipe', 'observar', 'Pailitas', 'querer', 'radiolarios', 'saco', 'ungir', 'Abraham', 'balanza', 'cadena', 'edificio', 'falda', 'gallo', 'hacer', 'jefe', 'madrugar', 'naranja', 'obstreta', 'Paipa', 'queso', 'raiz', 'sacramento', 'talco', 'unicelular', 'abreviar', 'Balboa', 'caer', 'deber', 'editorial', 'falla', 'gal√≥n', 'igual', 'narig√≥n', 'paisaje', 'rango', 'tallo', 'unidad', 'valores', 'abrigo', 'ballena', 'caf√©', 'deberes', 'fallar', 'Gamarra', 'hacienda', 'igualdad', 'Magangu√©', 'nariguera', 'Ocamote', 'p√°jaro', 'sacrificar', 'tamal', 'uniforme', 'vamos', 'abril', 'ballet', 'Caicedonia', 'd√©bil', 'EEUU', 'False', 'Gambita', 'hamaca', 'ilustraci√≥n', 'jeringa', 'Magdalena', 'Nari√±o', 'Oca√±a', 'palabra', 'qui√©n', 'r√°pido', 'sacrificio', 'Tamalameque', 'vanidad', 'baloncesto', 'caja', 'd√©cada', 'Efesios', 'falta', 'ganancias', 'hambre', 'Jerusal√©n', 'magia', 'nariz', 'ochenta', 'quiero', 'raro', 'sadismo', 'tambi√©n', 'vara', 'absorber', 'banano', 'dec√°gono', 'eficaz', 'familia', 'gancho', 'hay', 'imaginaci√≥n', 'magisterio', 'nataci√≥n', 'ocho', 'Quimbaya', 'rat√≥n', 'tampoco', 'Universidad', 'vaso', 'abstracto', 'ba√±ar', 'Cajamarca', 'decagramo', 'eficiente', 'famoso', 'hebreo', 'im√°n', 'Jord√°n', 'magnetismo', 'natural', 'ochocientos', 'quince', 'rayo', 'Sahag√∫n', 'tangente', 'uno', 'veedor', 'abuelo', 'Banco', 'caj√≥n', 'decalitro', 'egoista', 'fan√°tico', 'hectarea', 'imitar', 'ladeado', 'naturaleza', 'oclusivo', 'quincena', 'sal', 'T√°ngua', 'urgente', 'veinte', 'aburrido', 'bandera', 'cal', 'dec√°metro', 'el', 'fanegada', 'garaje', 'hect√≥gramo', 'impenetrabilidad', 'Josu√©', 'ladear', 'Mahates', 'navidad', 'oct√°gono', 'Quind√≠o', 'raz√≥n', 'sala', 'tarde', 'Uribe', 'vela', 'abuso', 'banquete', 'calamar', 'fantas√≠a', 'garrote', 'hectolitro', 'implicaci√≥n', 'joven', 'ladrar', 'Mahoma', 'Nazareth', 'octubre', 'quinientos', 'tardes', 'ur√≥logo', 'velatorio', 'banquitas', 'calambre', 'decena', 'faringe', 'gas', 'hect√≥metro', 'imponer', 'ladrillo', 'Maic√°o', 'nazismo', 'ocupado', 'recepci√≥n', 'tarea', 'Urr√°o', 'velludo', 'acabar', 'barato', 'Calarc√°', 'decente', 'fariseos', 'gaseosa', 'importaci√≥n', 'joyero', 'l√°grima', 'mal', 'n√©ctar', 'odio', 'quinto', 'recordar', 't√©', 'Uruguay', 'Venadillo', 'acariciar', 'barbero', 'calcio', 'decepcionado', 'faro', 'gasolina', 'hept√°gono', 'importante', 'lagrimeo', 'negro', 'oferta', 'quiste', 'rect√°ngulo', 'usb', 'venado', 'Barbosa', 'calcular', 'dec√≠gramo', 'fascinar', 'gato', 'herb√≠voros', 'imposible', 'juanete', 'laico', 'M√°laga', 'Neira', 'oficina', 'recto', 'usted', 'aceite', 'Barrab√°s', 'decilitro', 'fauna', 'gelatina', 'herej√≠a', 'jubilaci√≥n', 'lana', 'Malambo', 'neol√≠tico', 'ofrecer', 'rector', 'salado', 'ustedes', 'vendedor', 'acelerar', 'Barrancabermeja', 'Caldas', 'dec√≠metro', 'fe', 'gen', 'hermano', 'imprevisto', 'lapicero', 'maleabilidad', 'nervio', 'ofrenda', 'palanca', 'Salamina', 'vender', 'acento', 'Barranquilla', 'Caldereta', 'febrero', 'generoso', 'Herodes', 'incapacitado', 'jud√≠o', 'lapiz', 'malo', 'nervioso', 'oftalm√≥logo', 'paleol√≠tico', 'Salazar', '√∫tero', 'Venecia', 'aceptar', 'barrer', 'caldo', 'decir', 'fecha', 'G√©nesis', 'herpes', 'Incas', 'jueves', 'mam√°', 'neurona', 'Oiba', 'Palestina', 'salchicha', 't√©cnico', '√ötica', 'veneno', 'acera', 'base', 'Cali', 'decisi√≥n', 'fecundaci√≥n', 'genotipo', 'herramientas', 'INCI', 'jugar', 'Mamatoco', 'o√≠do', 'p√°lido', 'salchich√≥n', 'tecnolog√≠a', 'uva', 'venir', 'acercar', 'basura', 'caliente', 'dedicaci√≥n', 'federaci√≥n', 'Genova', 'HETAH', 'incisivos', 'l√°ser', 'mam√≠feros', 'oidores', 'Salento', 'tecnol√≥gicas', 'ventana', 'acercarse', 'bautizado', 'Califa', 'dedos', 'felicitaciones', 'gente', 'hex√°gono', 'inclusi√≥n', 'l√°tigo', 'mamograf√≠a', 'neutro', 'o√≠r', 'salida', 'tejido', 'Ventures', '√°cido', 'bautizar', 'calificaci√≥n', 'elasticidad', 'felicitar', 'gentilicio', 'hiato', 'inc√≥gnita', 'juicioso', 'lat√≠n', 'ma√±ana', 'neutr√≥n', 'ojal√°', 'Palmira', 'redondeo', 'salmo', 'ver', 'bautizo', 'calificar', 'dejar', 'el√°stico', 'geolog√≠a', 'hiena', 'incoloro', 'julio', 'mandarina', 'nevera', 'ojeras', 'paludismo', 'reflexi√≥n', 'verbo', 'aclaraci√≥n', 'bazo', 'caliz', 'el√©ctrica', 'feliz', 'geometr√≠a', 'h√≠gado', 'incorporar', 'junio', 'Latinoam√©rica', 'manejar', 'Nicaragua', 'ojos', 'pan', 'reforestaci√≥n', 'saltan', 'verdad', 'acn√©', 'beb√©', 'calle', 'delegar', 'electricista', 'gerundio', 'higiene', 'incubaci√≥n', 'latitud', 'nieto', 'olfato', 'panadero', 'refr√°n', 'saltar', 'verde', 'ac√≥litos', 'Becerr√≠l', 'cal√≥rica', 'delgado', 'electr√≥n', 'feo', 'gimnacio', 'hijo', 'incubadora', 'justicia', 'lavadero', 'mango', 'ni√±o', 'olimpiada', 'pa√±al', 'refuerzo', 'salud', 'verdura', 'acomodar', 'becerro', 'calvo', 'delicadeza', 'elefante', 'feria', 'gimnasia', 'hilum', 'incumplir', 'justificar', 'leal', 'manifestaci√≥n', 'nivel', 'olor', 'panela', 'rega√±ar', 'saludo', 'Versalles', 'acompa√±ar', 'Belalcazar', 'calzones', 'demorar', 'elegante', 'f√©rtil', 'ginec√≥logo', 'himen', 'indicativo', 'lealtad', 'no', 'olvidar', 'pantal√≥n', 'r√©gimen', 'Salvador', 'verso', 'acosar', 'Bel√©n', 'denominador', 'elegir', 'festivo', 'Girardot', '√≠ndice', 'Lebrija', 'manipular', 'omn√≠voros', 'pantaloncillo', 'tela', 'vertebrados', 'densidad', 'elemento', 'Girardota', 'hiperactivo', 'indocumentado', 'lecci√≥n', 'maniqu√≠', 'once', 'pantufla', 'regla', 'salvaje', 'tel√©fono', 'acostarse', 'c√°mara', 'dentadura', 'ella', 'fidelidad', 'glande', 'hip√©rbole', 'inexacta', 'leccionario', 'Manizales', 'pap√°', 'Saman√≠ego', 'vestido', 'acta', 'dentario', 'ellas', 'fiebre', 'gl√°ndulas', 'hipismo', 'infarto', 'mano', 'operacionales', 'P√°pa', 'Samsung', 'tel√©grafo', 'actitud', 'belice', 'camar√≥n', 'deportar', 'ellos', 'figura', 'hipoac√∫sico', 'infinitivo', 'lechuga', 'Manta', 'operador', 'papaya', 'Samuel', 'telescopio', 'actual', 'bendici√≥n', 'camarones', 'deporte', 'hipoc√°usico', 'inflamable', 'lector', 'mantel', 'opinar', 'papel', 'regocijar', 'televisi√≥n', 'vestir', 'acuario', 'benegnidad', 'cambiar', 'depredaci√≥n', 'embalses', 'filtraci√≥n', 'hipotenusa', 'informaci√≥n', 'leer', 'manzana', 'optimista', 'reinado', 'televisor', 'vestirse', 'acu√°tico', 'Betulia', 'camello', 'deprimido', 'embarazo', 'hippie', 'ingeniero', 'Manzanares', 'oraci√≥n', 'papilas', 'reinar', 'telofase', 'acunar', 'Biblia', 'camilla', 'derechos', 'embetunar', 'finca', 'histerectom√≠a', 'Maparip√°n', 'para', 'reine', 'temblor', 'vicepresidente', 'acurrucar', 'bibliograf√≠a', 'caminan', 'derivada', 'emblema', 'historia', 'inhalar', 'Lejan√≠as', 'maquillarse', 'noches', 'reir', 'vicio', 'Ad√°n', 'biblioteca', 'caminar', 'dermis', 'embobar', 'fino', 'gl√≥bulos', 'historieta', 'inicio', 'lejos', 'noci√≥n', 't√©mpera', 'Victoria', 'adaptaci√≥n', 'bibliotec√≥logo', 'camisa', 'derrotar', 'embolador', 'firma', 'gloriosos', 'hogar', 'inmenso', 'lengua', 'nombre', 'paradero', 'temperatura', 'vida', 'adelantar', 'bien', 'camiseta', 'desacuerdo', 'embri√≥n', 'firmar', 'google', 'hojas', 'inmiscuir', 'non√°gono', 'paramecio', 'templanza', 'viejo', 'adherir', 'bienvenido', 'campana', 'desaf√≠o', 'embudo', 'firme', 'gordo', 'hola', 'innovadora', 'lenguaje', 'maravilloso', 'nosotros', 'p√°ramo', 'temprano', 'viernes', 'adhesi√≥n', 'bigote', 'campe√≥n', 'desarrollar', 'emigraci√≥n', 'fiscal', 'gorila', 'hombre', 'innovadores', 'marcador', '√≥rbita', 'tenemos', 'Villamar√≠a', 'adhesivo', 'biling√ºismo', 'campeonato', 'desayuno', 'emocionado', 'flaco', 'hombro', 'mareo', 'noticia', 'Paraus√≠a', 'tener', 'Villavicencio', 'adiestrar', 'bilirrubina', 'descansa', 'empalme', 'Flandes', 'gracia', 'homenaje', 'inoloro', 'lentes', 'margarita', 'noticiero', 'orden', 'relaciones', 'tengo', 'Villeta', 'adios', 'bilis', 'cana', 'descansar', 'empanada', 'flecha', 'gracias', 'homosexual', 'inquisici√≥n', 'Mar√≠a', 'novecientos', 'parecido', 'relajaci√≥n', 'tenis', 'vino', 'adiposa', 'billete', 'Canad√°', 'descomposici√≥n', 'emparedado', 'flexi√≥n', 'hondo', 'insaboro', 'leopardo', 'novela', 'ordenar', 'par√©nquima', 'sanaci√≥n', 'Tenjo', 'violaci√≥n', 'adjetivo', 'canasta', 'descripci√≥n', 'empate', 'flojo', 'grados', 'honestidad', 'inscripci√≥n', 'leproso', 'marioneta', 'noventa', 'oreja', 'religi√≥n', 'Sandon√°', 'tensi√≥n', 'Viot√°', 'billetera', 'c√°ncer', 'descubrir', 'empezar', 'Florencia', 'grafema', 'honrado', 'insecticida', 'L√©rida', 'Marquetalia', 'noviembre', '√≥rganos', 'religiosa', 'sangre', 'tentaci√≥n', 'virgen', 'billones', 'Canciller', 'desea', 'florero', 'gr√°fica', 'hora', 'insect√≠voros', 'Marsella', 'novio', 'relog', 'sano', 'teorema', 'virus', 'adjuntar', 'bimestral', 'candado', 'desgastar', 'empleo', 'flota', 'hospital', 'insectos', 'letra', 'martes', 'n√∫cleo', 'orgulloso', 'par√©ntesis', 'reloj', 'visa', 'binomio', 'candelabro', 'deshidrataci√≥n', 'Emprendetic', 'fluctuaci√≥n', 'hostia', 'inseminaci√≥n', 'Marulanda', 'nudo', 'origen', 'renovables', 'visitar', 'admirar', 'bio√©tica', 'Candelaria', 'desigual', 'enamorar', 'fonema', 'hotel', 'insolaci√≥n', 'marzo', 'nuera', 'ortodoncista', 'par√≥nimas', 'renuncia', 'terapia', 'admitir', 'biolog√≠a', 'candelero', 'desinfectar', 'encantar', 'forma', 'gram√°tica', 'hoy', 'INSOR', 'levantarse', 'mas', 'nuestro', 'ortograf√≠a', 'parpadeo', 'repasar', 'Santiago', 'tercero', 'visual', 'adobar', 'biopsia', 'candidato', 'deslizar', 'encarnaci√≥n', 'formal', 'Granada', 'inspiraci√≥n', 'lexema', 'masa', 'nueve', 'oscilaci√≥n', 'p√°rpados', 'repetir', 'santificador', 'terco', 'viv√≠paros', 'adopci√≥n', 'bi√≥sfera', 'caneca', 'desmayarse', 'enc√©falo', 'formar', 'granadilla', 'Huila', 'instinto', 'l√©xico', 'masaje', 'nuevo', 'oscuro', 'parque', 'reposo', 'terminal', 'vocabulario', 'adoptar', 'bipartici√≥n', 'cangrejo', 'desnudar', 'encendedor', 'grande', 'humanidad', 'L√≠bano', '√≥sea', 'p√°rrafo', 'represa', 'sapo', 'terminar', 'vocal', 'adorable', 'b√≠pedos', 'canguro', 'desobediente', 'encestador', 'foro', 'gran√≠voros', 'humanitaria', 'liberaci√≥n', 'matas', 'Os√©as', 'parrilla', 'representante', 'term√≥metro', 'voltimetro', 'adoraci√≥n', 'bis√≠laba', 'canino', 'desodorante', 'encestar', 'fortaleza', 'grano', 'humano', 'insulto', 'libertad', 'matem√°ticas', 'numerador', 'oso', 'reproducci√≥n', 'terremoto', 'volumen', 'adorar', 'bistur√≠', 'canoso', 'desordenar', 'enciclopedismo', 'forzar', 'grasa', 'humilde', 'inteligencia', 'libra', 'materia', 'n√∫mero', 'ostra', 'participar', 'reproductora', 'terrestre', 'vuelan', 'adormilar', 'bizco', 'cansado', 'despertar', 'Encino', 'grasoso', 'humus', 'inteligente', 'l√≠der', 'matrimonio', 'otorrinolaring√≥logo', 'participio', 'reptan', 'Tesalonicenses', 'vulva', 'adulto', 'blanco', 'cantar', 'despu√©s', 'encoger', 'fotocopiadora', 'gratis', 'intenci√≥n', 'lim√≥n', 'reptiles', 'secante', 'tesorero', 'adverbio', 'blanqueador', 'cantidad', 'desvestirse', 'encontrar', 'fotos√≠ntesis', 'grave', 'interacci√≥n', 'limosnero', 'Mayas', 'n√∫meros', 'otro', 'rep√∫blica', 'secretaria', 'tesoro', 'advertir', 'blasfemia', 'desvincularse', 'fracasado', 'gravedad', 'interdependencia', 'limpiar', 'mayo', 'ovario', 'secreto', 'test√≠culos', 'a√©reos', 'blusa', 'capilar', 'deterioro', 'enemigo', 'greca', 'inter√©s', 'limpio', 'mayonesa', 'ov√≠paros', 'residir', 'secretora', 'testigo', 'af√°n', 'bobada', 'capital', 'determinante', 'energ√≠a', 'fractura', 'griego', 'lind√≠simo', 'mayor', 'ovispo', 'pasado', 'residuo', 'sed', 'afiche', 'boca', 'Capitanejo', 'Deuteronomio', 'fr√°gil', 'grieta', 'lindo', 'mazamorra', 'ovulaci√≥n', 'resorte', 'sedimentaci√≥n', 'afiliado', 'bocadillo', 'capitulo', 'd√≠a', 'enero', 'fraile', 'grillo', 'interferir', 'mazorca', '√≥vulos', 'pasaporte', 'respetar', 'seguir', 'Tib√∫', 'afrontar', 'bodega', 'cara', 'di√°cono', 'enfermedad', 'frasco', 'gripa', 'linf√°tico', 'mecer', 'oxidaci√≥n', 'p√°scua', 'tibur√≥n', 'agachar', 'bofetada', 'caracol', 'diagonal', 'enfermo', 'frase', 'gr√≠s', 'ling√ºista', 'medalla', 'ox√≠geno', 'pasta', 'segundo', 'agarrar', 'Bogot√°', 'car√°cter', 'dialecto', 'enflaquecer', 'frecuencia', 'grito', 'lisosomas', 'Medell√≠n', 'oyente', 'pastilla', 'respirar', 'seguro', 'tienda', 'agentes', 'Bojac√°', 'Carcas√≠', 'dialogar', 'enfrentar', 'freno', 'grosero', 'internado', 'lista', 'media', 'Pasto', 'responsabilidad', 'seis', 'agosto', 'boleta', 'cardi√≥logo', 'di√°metro', 'enfrente', 'frente', 'Guaca', 'internar', 'litro', 'nunca', 'patac√≥n', 'responsable', 'tigre', 'agotado', 'Bolivar', 'carga', 'diarrea', 'enganchar', 'fresa', 'Guacar√≠', 'internet', 'mediatriz', 'nutrientes', 'patagonia', 'respuesta', 'seiscientos', 'tijera', 'agotar', 'cargo', 'd√≠as', 'enlace', 'Fresno', 'Guadalupe', 'interno', 'llamado', 'medicamento', 'pataleta', 'resta', 'semana', 'timbre', 'agregar', 'caribe', 'di√°stole', 'ensalada', 'fr√≠o', 'Guamal', 'interponer', 'll√°mame', 'patena', 'restaurante', 'timo', 'agua', 'caridad', 'dibujar', 'ense√±ame', 'frontera', 'guantes', 'interpretar', 'llamar', 'm√©dico', 'pato', 'Restrepo', 'semestral', 'Timot√©o', 'bolsa', 'Dibulla', 'ense√±ar', 'Frontino', 'guapo', 'interprete', 'paz', 'resurecci√≥n', 'seminario', 'tinto', 'bolso', 'carne', 'diciembre', 'ensordecido', 'frustado', 'Guapota', 'interrumpir', 'SENA', 't√≠o', 'aguacate', 'bomba', 'carnicero', 'dic√≠pulo', 'entender', 'fruta', 'Guarne', 'intersecci√≥n', 'llamas', 'pecado', 'se√±as', 'Tito', 'aguacero', 'caro', 'dictado', 'entendimiento', 'Gu√°tica', 'llamativo', 'pedag√≥gica', 'retina', 'seno', 'tiza', 'Aguadas', 'bombardear', 'carpeta', 'did√°ctico', 'entrar', 'Guavata', 'llano', 'pedazo', 'Retiro', 'senos', 'toalla', 'bondad', 'carrera', 'diecinueve', 'fuerte', 'guayaba', 'introducci√≥n', 'llanto', 'Pedro', 'reto', 'sentido', 'bonita', 'carreras', 'dieciocho', 'entrecruzamiento', 'funciones', 'gusano', 'inundaci√≥n', 'llanura', 'pegante', 'retraso', 'sentidos', 'toca', 'ahora', 'borrador', 'carro', 'dieciseis', 'Entrerios', 'funda', 'gusanos', 'inutil', 'llave', 'reuni√≥n', 'sentir', 'tocador', 'aj√≠', 'Bosconia', 'carta', 'diecisiete', 'Envigado', 'Fundaci√≥n', 'gustar', 'invadir', 'llegar', 'reunir', 'separado', 'Tocaima', 'ajo', 'botas', 'Cartagena', 'dientes', 'epidermis', 'fundador', 'inventar', 'llenar', 'mejor', 'revoluci√≥n', 'septiembre', 'tocar', 'ajustar', 'botella', 'di√©resis', 'epiglotis', 'Funes', 'invento', 'llevar', 'Melgar', 'peinilla', 'rey', 'ser', 'botiqu√≠n', 'cartelera', 'diez', 'epitelial', 'Funza', 'inversi√≥n', 'llorar', 'membrana', 'pelear', 'RH', 'seres', 'cartilaginoso', 'diferente', 'epitelio', 'furioso', 'inverso', 'llover', 'memoria', 'peligroso', 'Ricaurte', 'todopoderoso', 'ala', 'cartuchera', 'dif√≠cil', 'equilibrio', 'fusible', 'invertebrados', 'llovizna', 'menos', 'pelo', 'rico', 'todos', 'alabanza', 'br√°nquias', 'casa', 'difusi√≥n', 'equinodermos', 'fusiforme', 'investidura', 'lluvia', 'menstruaci√≥n', 'pelota', 'riesgo', 'serio', 'Alba', 'brassier', 'digestivo', 'equipaje', 'fusi√≥n', 'invidente', 'mensual', 'peluquer√≠a', 'rinoceronte', 'servidumbre', 'Toledo', 'Albania', 'bravo', 'd√≠gito', 'equipo', 'futbol', 'invitame', 'mentir', 'ri√±ones', 'sesenta', 'tolerancia', 'Alcal√°', 'brazo', 'casado', 'dignidad', 'equivalente', 'futuro', 'invitar', 'mentiroso', 'penar', 'setarse', 'Tolima', 'Alcalde', 'brillante', 'c√°scara', 'dilataci√≥n', 'equivocar', 'involuntario', 'lobo', 'ment√≥n', 'p√©ndulo', 'setecientos', 'tomar', 'Alcald√≠a', 'bromear', 'casi', 'dimensiones', 'era', 'inyecci√≥n', 'localizar', 'mercado', 'pene', 'Riohacha', 'setenta', 'alcanzar', 'bronquiolos', 'cassette', 'diminutivo', 'ipad', 'logaritmo', 'mercanc√≠a', 'penitencia', 'R√≠osucio', 'seud√≥nimo', 'Tom√°s', 'br√≥nquios', 'dinero', 'Iphone', 'l√≥gica', 'mes', 'Pe√±ol', 'riqu√≠simo', 'sex√≥logo', 'tomate', 'brujo', 'Casulla', 'Dios', 'Iris', 'longitud', 'pensar', 'si', 'br√∫jula', 'catec√∫meno', 'erizado', 'irradiar', 'Mesetas', 'Sibat√©', 'alcoba', 'Bucaramanga', 'catetos', 'director', 'esbelta', 'irrumpir', 'mes√≠as', 'robar', 'sicoling√ºista', 'torneo', 'alcoholismo', 'bucear', 'cat√≥lico', 'escamas', 'Isa√≠as', 'mesoamerica', 'Pensilvania', 'robusto', 'sida', 'toro', 'alerta', 'catorce', 'discapacidad', 'escoger', 'Islam', 'meta', 'pent√°gono', 'siempre', 'torta', 'aletas', 'caucho', 'discoteca', 'escogida', 'isqui√≥n', 'lotero', 'rojo', 'siete', 'tortuga', 'alfabeto', 'causa', 'discreci√≥n', 'escol√°stica', 'Israel', 'luminosos', 'metafase', 'peor', 'Romanos', 'siglo', 'tos', 'buenas', 'discurso', 'esconder', 'metamorfosis', 'peque√±ito', 'rombo', 'significante', '√°lgebra', 'bueno', 'cebolla', 'dise√±ador', 'lunes', 'metido', 'peque√±o', 'romper', 'signo', 'trabajar', 'algod√≥n', 'buenos', 'luruaco', 'm√©todo', 'pera', 'roncar', 's√≠laba', 'traer', 'algunos', 'bulbo', 'ceja', 'dise√±o', 'lustrabotas', 'perder', 'ropa', 'silencio', 'tragedia', 'alimentador', 'celador', 'disgregaci√≥n', 'escribir', 'lustrar', 'rosa', 'silogismo', 'tranquilo', 'bulto', 'celebrar', 'dispersar', 'escritor', 'lustro', 'perd√≥n', 'rosado', 'simp√°tico', 'transmilenio', 'alisar', 'bu√±uelo', 'celent√©reos', 'distanciarse', 'escuadra', 'luto', 'M√©xico', 'pereza', 'rosario', 'simple', 'transparente', 'aliviar', 'burgos', 'celoma', 'disyunto', 'escucha', 'luz', 'mezcla', 'perezoso', 'rotaci√≥n', 'simplificaci√≥n', 'transpiraci√≥n', 'all√°', 'burro', 'celoso', 'dividendo', 'escuchar', 'papa', 'mi', 'perfecto', 'ruana', 'transportador', 'alma', 'buscar', 'c√©lula', 'divisible', 'perforadora', 'sinagoga', 'trapecio', 'almacen', 'buseta', 'divisi√≥n', 'esfero', 'microfilamento', 'perfume', 'sinceridad', 'traslaci√≥n', 'almeja', 'buzo', 'divisor', 'es√≥fago', 'trasl√∫cidos', 'almid√≥n', 'espacios', 'mi√©rcoles', 'per√≠metro', 'sin√≥nimos', 'trasnochar', 'almohada', 'doce', 'espagueti', 'migraci√≥n', 'permiso', 'sintaxis', 'trasplante', 'almoj√°bana', 'documento', 'espalda', 'mil', 'perro', 's√≠ntesis', 'trauma', 'almuerzo', 'celular', 'dolor', 'espa√±ol', 'mil', 'sinverguenza', 'trece', 'alojar', 'cenicero', 'dolorosos', 'especial', 'milagro', 'persona', 'siquiatra', 'trecientos', 'altar', 'centiarea', 'dom√©sticos', 'especialista', 'miligramo', 'sistema', 'treinta', 'alterado', 'cent√≠grados', 'domingo', 'especie', 'trepan', 'alternativa', 'cent√≠gramo', 'espejo', 'milla', 'tres', 'alto', 'cent√≠litro', 'd√≥nde', 'esperar', 'millon', 'perspectiva', 'aluminio', 'cent√≠metro', 'espeso', 'millones', 'pertenecer', 'alumno', 'dones', 'espina', 'mimar', 'pertenencia', 'triangulo', 'Alvarado', 'centralismo', 'dormir', 'Espinal', 'Per√∫', 'alve√≥los', 'centro', 'dos', 'espinilla', 'ministerio', 'pesebre', 'alza', 'Centroam√©rica', 'espiraci√≥n', 'pesimista', 'trimestral', 'amable', 'cepillo', 'esp√≠ritu', 'peso', 's√≠stole', 'tr√≠pode', 'Amalf√≠', 'pesta√±a', 'sobresabana', 'triptongo', 'amanecer', 'doscientos', 'esponja', 'pesta√±as', 'sobrino', 'tris√≠laba', 'amante', 'cerca', 'doxolog√≠a', 'esposa', 'petroleo', 'social', 'triste', 'amargo', 'cerco', 'ductilidad', 'esposas', 'pez', 'sociales', 'trombosis', 'amarillo', 'cerdo', 'duele', 'esposo', 'PI', 'socio', 'amasar', 'cerebro', 'dulce', 'esposos', 'picar', 'socioling√ºista', 'ambicioso', 'cero', 'duodeno', 'esta', 'pie', 'sof√°', 'ambientador', 'Cerrito', 'durazno', 'estad√≠stica', 'Piedras', 'Sogamoso', 'troposfera', 'Amb√≥n', 'cerveza', 'duro', 'estado', 'sol', 'tu', 'ameba', 'cesarea', 'estallar', 'pierna', 'Soledad', 'amenaza', 'Chachagu√≠', 'estamos', 'ministro', 'pies', 'solidificaci√≥n', 'Tumaco', 'Am√©rica', 'champi√±ones', 'estampado', 'minuendo', 'pij√°o', 'solo', 'Tunja', 'am√≠gdala', 'champ√∫', 'estampilla', 'minuto', 'piloto', 'T√∫querres', 'amigo', 'chapet√≥n', 'estancar', 'mio', 'pi√±a', 'soltero', 'Turbaco', 'amonestar', 'chaqueta', 'est√°tica', 'miop√≠a', 'pi√±ata', 'soluci√≥n', 'Turban√°', 'amor', 'Charal√°', 'estatua', 'Miqu√©as', 'pincel', 'sombra', 'turnar', 'amorosa', 'estatuto', 'miri√°metro', 'Pinchote', 'sombrero', 'turno', 'Am√≥s', 'Charta', 'est√©ril', 'ping√ºino', 'so√±ar', 'tutor', 'amper√≠metro', 'Chef', 'esternocleidomastoideo', 'misericordia', 'pintar', 'Sons√≥n', 'tuyo', 'amplificaci√≥n', 'Chima', 'Esther', 'Mistrato', 'sopa', 'twitter', 'ampollas', 'Chimichagua', 'estola', 'mitocondria', 'Soplaviento', 'amputar', 'Chinacota', 'est√≥mago', 'mitosis', 'pintura', 'soplo', 'anafase', 'Chinchin√°', 'estopa', 'moda', 'piojo', 'sordo', 'Anapoima', 'Chin√∫', 'estrategia', 'pir√°mide', 'sordociego', 'anaranjado', 'chispa', 'estre√±imiento', 'modelaje', 'pirata', 'sorpresa', 'anatom√≠a', 'chistoso', 'estuche', 'modelo', 'Pivijay', 'soy', 'ancho', 'chivo', 'estudiante', 'Mogotes', 'piyama', 'suave', 'anciano', 'Choach√≠', 'estudiar', 'Mois√©s', 'pizza', 'subconjunto', 'Androi', 'Choco', 'estudio', 'mojar', 'plancha', 'subir', 'andropausia', 'chocolate', 'molares', 'plano', 'an√©lidos', 'Chocont√°', 'mol√©cula', 'anestesi√≥logo', 'cianobacterias', 'estufa', 'molestar', 'anexar', 'ciclo', 'eterno', 'moluscos', 'sucio', 'anf√≠bio', 'ciego', '√©tica', 'Momp√≥s', 'sudadera', 'angiospermas', 'cien', 'etopeya', 'Mongoles', 'sudor', 'Angostura', 'Cienaga', 'eucarist√≠a', 'mono', 'plaquetas', 'suegro', '√°ngulo', 'cient√≠fico', 'Eva', 'monomio', 'plasma', 'sue√±o', 'ciento', 'Evangelio', 'monos√≠laba', 'plata', 'sufijo', 'Cimitarra', 'evaporaci√≥n', 'monoteismo', 'pl√°tano', 'suicidio', 'cinco', 'evidente', 'm√≥nstruo', 'suma', 'evitar', 'plat√≥n', 'sumados', 'exacta', 'Montenegro', 'playa', 'superficie', 'cincuenta', 'exagerar', 'mora', 'plomero', 'supermercado', 'cine', 'examen', 'moral', 'pluma', 'Supia', 'cinemat√≥grafo', 'morder', 'pluricelular', 'suposici√≥n', 'cin√©tica', 'excremento', 'moreno', 'pobre', 'suspender', 'excretor', 'morfema', 'poco', 'sustancia', 'Circasia', 'excretora', 'morfolog√≠a', 'anidaci√≥n', 'circuito', 'exhibicionista', 'morir', 'poder', 'sustantivo', 'animal', 'exhibir', 'morral', 'poeta', 'animales', '√âxodo', 'mostrar', 'polea', '√°nimo', 'circulatorio', 'experto', 'motora', 'pol√≠gono', 'sustraendo', 'a√±o', 'circunferencia', 'explicar', 'mover', 'polinomio', 'suyo', 'a√±os', 'exportar', 'mucho', 'polis√≠laba', 'a√±os', 'exposici√≥n', 'pollito', 'antena', 'cirug√≠a', 'expresi√≥n', 'muerte', 'pollo', 'cirujano', 'Polonuevo', 'antes', 'Cisneros', 'expresivo', 'mujer', 'poltrona', 'expulsar', 'multiplicaci√≥n', 'Ponedera', 'extensi√≥n', 'ponqu√©', 'antifaz', 'citoplasma', 'extra√±ar', 'Anti√≥quia', 'civil', 'extranjerismo', 'antolog√≠a', 'civismo', 'extremidades', 'ant√≥nimo', 'clan', 'antrop√≥logo', 'claro', 'anual', 'clase', 'mu√±eco', 'anunciaci√≥n', 'municipio', 'aparato', 'porci√≥n', 'portada', 'Apartad√≥', 'portatil', 'apartamento', 'porteria', 'apenas', 'postulado', 'clip', 'potenciaci√≥n', 'Apocalipsis', 'cl√≠toris', 'practicar', 'apoyar', 'clorofila', 'Prado', 'aprender', 'club', 'preguntame', 'apretado', 'coagulaci√≥n', 'preguntar', 'aprovechado', 'cobija', 'm√∫sica', 'premisa', 'aprovechar', 'cocina', 'mutaciones', 'premolares', 'Apulo', 'coco', 'preocupado', 'aqu√≠', 'cocodrilo', 'presbicia', 'ar√°cnidos', 'Cocorn√°', 'presentar', 'ara√±a', 'c√≥digo', 'presente', 'Aratoca', 'Coello', 'presidente', '√°rbitro', 'coger', '√°rbol', 'colaboraci√≥n', 'prestar', 'arcilla', 'coleccionar', '√°rea', 'colectivo', 'colegio', 'primero', 'arepa', 'primo', 'argumentaci√≥n', 'principio', 'Armenia', 'coloidal', 'ARN', 'Colombia', 'prisma', 'aroma', 'colon', 'probabilidad', 'arom√°tica', 'colonia', 'arrastrar', 'colonizador', 'problema', 'arreglar', 'colorear', 'arrendar', 'colores', 'productor', 'arrepentimiento', 'colorete', 'profase', 'arriba', 'Colosenses', 'profesional', 'arriesgar', 'columna', 'profesor', 'arroba', 'profesores', 'arroz', 'coma', 'arruga', 'combinaci√≥n', 'arrugada', 'comedia', 'prohibir', 'arrugado', 'comedor', 'pr√≥logo', 'comensalismo', 'promesa', 'comenzar', 'comer', 'pronombre', 'art√≠culo', 'comida', 'artr√≥podos', 'comisi√≥n', 'pronto', 'arveja', 'propiedad', 'arzobispo', 'c√≥mo', 'asaltar', 'asamblea', 'proporciones', 'ascender', 'prosopograf√≠a', 'asexual', 'compa√±ero', 'pr√≥spero', 'asfixia', 'prot√≥n', 'asignar', 'comparar', 'proximo', 'asistir', 'comp√°s', 'prudente', 'asma', 'complemento', 'pueblo', 'asociaci√≥n', 'completo', 'asombrar', 'comportamiento', 'aspiraci√≥n', 'comprar', 'puede', 'aspiradora', 'comprensibilidad', 'asquelmintos', 'comprensi√≥n', 'astr√≥logo', 'compromiso', 'astronauta', 'compuesto', 'computador', 'asunto', 'computadores', 'pulga', 'asustado', 'comulgar', 'pulgada', 'asustarse', 'comunero', 'pulido', 'atenci√≥n', 'comunicaci√≥n', 'pulir', 'aterrar', 'pulmones', 'atm√≥sfera', 'comunidad', 'pulpo', '√°tomo', 'puma', 'atraccion', 'comuni√≥n', 'punto', 'atrapar', 'con', 'atrasado', 'concepci√≥n', 'atrevido', 'conceptual', 'audici√≥n', 'conciencia', 'auditiva', 'concilio', 'auditor', 'concordato', 'puntual', 'aula', 'concreto', 'pupila', 'aurora', 'concupiscencia', 'Purificaci√≥n', 'autom√°tico', 'concurso', 'purificador', 'aut√≥nomo', 'condecorar', 'pur√≠sima', 'autopista', 'autor', 'conducta', 'autorizar', 'conejo', 'autoservicio', 'conferencia', 'auxiliar', 'confesi√≥n', 'avanzado', 'confianza', 'avanzar', 'confirmaci√≥n', 'aventura', 'confirmar', 'conflicto', 'aves', 'confrontar', 'avi√≥n', 'confuso', 'avisar', 'congelar', 'aviso', 'axioma', 'conjunci√≥n', 'ayer', 'conjunto', 'ayuda', 'ayudar', 'azteca', 'azucar', 'azul', 'cono', 'conocer', 'consecutivo', 'conservaci√≥n', 'consonante', 'Constantinopla', 'consuelo', 'consumidor', 'contado', 'contar', 'contempor√°neo', 'contenido', 'contento', 'contexto', 'contiene', 'continuar', 'contralor', 'contrarreforma', 'Copacabana', 'Cop√≥n', 'coqueta', 'coraz√≥n', 'corazones', 'corbata', 'corchete', 'C√≥rdoba', 'Corintios', 'Coromoro', 'correa', 'correcto', 'correr', 'correspondencia', 'corriente', 'corroer', 'corrupci√≥n', 'cosecante', 'cosecha', 'cosencante', 'coseno', 'costumbre', 'cotangente', 'crecer', 'cr√©dito', 'credo', 'cremallera', 'Cristo', 'cr√≠tica', 'criticar', 'cromoplastos', 'cromosomas', 'crucifijo', 'cruz', 'cuaderno', 'cuadr√≠cula', 'cuadro', 'cuadrupedos', 'cuajada', 'cu√°l', 'cualidad', 'cualquiera', 'cu√°ndo', 'cuantificadores', 'cu√°nto', 'cuarenta', 'cuaresma', 'cuarta', 'cuatro', 'cuatrocientos', 'Cuba', 'Cubarral', 'cubrelecho', 'cucaracha', 'cuchilla', 'C√∫cuta', 'cuello', 'cuero', 'cuerpo', 'cuidado', 'culebra', 'culpa', 'cultural', 'cu√±ado', 'curioso', 'curita', 'curso', 'curuba', 'curva', 'custodia', 'cutaneo']

def simplify_text_for_sign_language(frase):
    chat_completion = client.chat.completions.create(
            messages=[
                {
                    "role": "system",
                    "content": "Eres un bot que simplifica texto para poder ser traducido a lenguaje de se√±as. Por favor, simplifica el siguiente texto eliminando las palabras innecesarias para la compresion en lenguaje de se√±as como lo podrian ser algunos conectores. El texto devuelto no puede tener signos de puntuacion o numeros, pero si letras y tildes. Intenta acortar el texto lo maximo posible sin perder su significado.",
                },
                {
                    "role": "user",
                    "content": frase,
                }
            ],
            model="llama-3.3-70b-versatile",
        )

    frase = chat_completion.choices[0].message.content
    print(f"Texto simplificado: {frase}")
    return frase


def clear_folders():
    for folder in [imgLenguaje]:
        if os.path.exists(folder):
            # Eliminar archivos dentro de la carpeta
            for archivo in os.listdir(folder):
                archivo_path = os.path.join(folder, archivo)  # üîπ Ruta correcta
                if os.path.isfile(archivo_path):
                    os.remove(archivo_path)  # Elimina archivos
                elif os.path.isdir(archivo_path):
                    shutil.rmtree(archivo_path)  # Elimina subcarpetas

def normalize_text(texto):
    texto = texto.lower()
    return ''.join(c for c in unicodedata.normalize('NFD', texto) if unicodedata.category(c) != 'Mn')

def filter_words(frase, lista_palabras):
    frase = normalize_text(frase)
    palabras = frase.split()
    resultado = [palabra if palabra in lista_palabras else list(palabra) for palabra in palabras]
    return [item for sublist in resultado for item in (sublist if isinstance(sublist, list) else [sublist])]

def download_images(lista_palabras):
    url_base = "https://hetah.net/_assets/modules/traductor/img/"
    imagenes_descargadas = []

    if not os.path.exists(imgLenguaje):
        os.makedirs(imgLenguaje)

    for palabra in lista_palabras:
        ruta_guardado = os.path.join(imgLenguaje, f"{palabra}.jpg")

        # Si la imagen ya existe, no se descarga nuevamente
        if os.path.exists(ruta_guardado):
            print(f"‚è© Imagen ya existente: {palabra}.jpg (omitida)")
            imagenes_descargadas.append(ruta_guardado)
            continue

        url_imagen = f"{url_base}alfabeto/{palabra}.jpg" if len(palabra) == 1 else f"{url_base}{palabra[0]}/{palabra}.jpg"

        try:
            respuesta = requests.get(url_imagen, timeout=5)
            respuesta.raise_for_status()

            with open(ruta_guardado, "wb") as file:
                file.write(respuesta.content)

            print(f"‚úÖ Imagen descargada: {palabra}.jpg")
            imagenes_descargadas.append(ruta_guardado)
        except requests.RequestException:
            print(f"‚ö†Ô∏è No se pudo descargar: {url_imagen}")

    return imagenes_descargadas

def crop_images(imagenes_ordenadas):
    """Recorta las im√°genes en fragmentos de 320x240 y las guarda ordenadas."""
    fragmentos = []
    
    for archivo in os.listdir(imgLenguaje):
        ruta_imagen = os.path.join(imgLenguaje, archivo)
        
        if archivo.endswith(".jpg"):
            img = Image.open(ruta_imagen)  # Abre la imagen
            ancho, alto = img.size

            # Divide en fragmentos de 240px de altura
            for i in range(0, alto, 240):
                fragmento = img.crop((0, i, 320, i + 240))
                fragmento_path = os.path.join(imgLenguaje, f"{archivo}_part_{i//240}.jpg")
                fragmento.save(fragmento_path)
                fragmentos.append(fragmento_path)
            
            img.close()  # Cierra la imagen despu√©s de usarla
    
    return fragmentos

def assemble_images_into_video(imagenes_ordenadas, output_path):
    """Genera un video con las im√°genes en el orden correcto usando MoviePy."""
    fps = 18
    if not imagenes_ordenadas:
        print("‚ö†Ô∏è No hay im√°genes para generar el video.")
        return

    # Crear el clip de video con las im√°genes ordenadas
    clip = ImageSequenceClip(imagenes_ordenadas, fps=fps)
    
    # Guardar el video en el path de salida
    clip.write_videofile(output_path, codec="libx264", fps=fps)

def generate_video_signs(frase):
    # frase = simplify_text_for_sign_language(frase)
    resultado = filter_words(frase, list_words)

    # Descargar im√°genes en orden
    imagenes_ordenadas = download_images(resultado)

    # Recortar im√°genes y obtener fragmentos en orden
    fragmentos_ordenados = crop_images(imagenes_ordenadas)

    # Generar video con im√°genes en el orden correcto
    assemble_images_into_video(fragmentos_ordenados, video_path)

    clear_folders()  # Asegurar que la carpeta de im√°genes se limpia despu√©s
    print(f"üé• Video de se√±as generado")